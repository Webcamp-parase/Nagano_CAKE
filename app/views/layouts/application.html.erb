<!DOCTYPE html>
<html>
  <head>
    <title>NaganoCake</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <nav>
      <span>ながのCAKE</span>
    </nav>
    <nav>
        <% if customers_signed_in? %>
          <li><%= link_to 'マイページ',"customers_path(current_user)" %></li>
          <li><%= link_to '商品一覧',"products_path" %></li>
          <li><%= link_to 'カート',"cart_items_path" %></li>
          <li><%= link_to 'ログアウト', "destroy_customers_session_path", method: :delete %></li>
        <% elsif admin_signed_in? %>
          <div>
            <li><%= link_to '商品一覧', "products_path" %></li>
            <li><%= link_to '会員一覧', "customers_path" %></li>
            <li><%= link_to '注文履歴一覧', "orders_path" %></li>
            <li><%= link_to 'ジャンル管理', "categories_path" %></li>
          </div>
          <div>
            <%= form_tag(search_path, method: :get) do %>
            <%= text_field_tag 'search[content]' %>
            <%= select_tag 'search[model]', options_for_select({ "商品名" => "customer", "会員⽒名" => "products" }) %>
            <%= select_tag 'search[method]', options_for_select({ "完全一致" => "perfect", "前方一致" => "forward", "後方一致" => "backward", "部分一致" => "partial" }) %>
            <%= submit_tag '検索' %>
          </div>
        <% else %>
          <li><%= link_to '商品一覧', products_path %></li>
          <li><%= link_to '新規登録', new_customers_registrations_path %></li>
          <li><%= link_to 'ログイン', new_customers_session_path %></li>
        <% end %>
    </nav>

    <%= yield %>
  </body>
</html>
